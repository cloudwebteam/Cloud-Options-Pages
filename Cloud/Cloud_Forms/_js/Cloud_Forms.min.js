jQuery(function(e){function t(e,t){console.log(t);var n=e.parents(".field").first();if(n.find(":focus").size()>0)return;for(index in t){var r=t[index];console.log(r);n.find('.error-message[data-validation="'+r+'"]').show()}n.find(".cloud-error").slideDown("fast");return}e("#scroll-nav ul li a").on("click",function(t){t.preventDefault();target=this.hash;e.scrollTo(target,300)});e(".cloud-form").each(function(){var t=e(this),n=e(this).find("form"),r=!1;if(t.hasClass("tabs-layout")||t.hasClass("tabs_animated-layout")){r=!0;var s=n.find(".tabs li"),o=n.find(".tabs-content > div"),u=n.find(".tabs-content");o.hide();s.find("a").click(function(n){n.preventDefault();var r=o.filter(e(this).attr("href")).first();if(r.size()>0){if(t.hasClass("tabs_animated-layout")){u.css({height:u.height(),overflow:"hidden"});var i=r.css("opacity",0).show().outerHeight();r.hide().css("opacity",1);o.hide();r.fadeIn(500);u.animate({height:i},500,function(){u.css({height:"auto",overflow:"visible"})})}else{o.hide();r.show()}s.removeClass("active");e(this).parent("li").addClass("active");localStorage.setItem("lastTab",e(this).attr("href"))}});var a=typeof localStorage!="undefined"?localStorage.getItem("lastTab"):!1;if(a&&s.find('a[href="'+a+'"]').size()>0){s.find('a[href="'+a+'"]').parent("li").addClass("active");o.filter(a).show()}else{o.first().show();s.first().addClass("active")}}t.find("input, textarea, select").on("focus",function(){var t=e(this).parents(".clone, .group, .field").first();t.removeClass("has-error").find(".error-message").fadeOut("fast")});t.find('input[type="radio"], input[type="checkbox"]').on("change",function(){var t=e(this).parents(".clone, .group, .field").first();t.removeClass("has-error").find(".error-message").fadeOut("fast")});if(t.hasClass("ajax")){function f(t,n){var r=t.parents(".clone, .group, .field").first();r.removeClass("has-error");r.find(".cloud-error").hide();r.find(".error-message").hide();var s=t.is('[type="checkbox"], [type="radio"]');if(r.hasClass("required"))if(s){if(!t.is(":checked")){r.find('.error-message[data-validation="required"]').show();r.addClass("has-error");r.find(".cloud-error").slideDown();typeof n=="function"&&n("required");return!1}}else if(!t.val()||t.val()===t.data("placeholder")){r.find('.error-message[data-validation="required"]').show();r.addClass("has-error");r.find(".cloud-error").slideDown();typeof n=="function"&&n("required");return!1}var o=r.data("validate");if(o){var u={action:"input_validate",validation:o,value:t.val()};e.ajax({url:cloud.cloud_ajax,data:u,type:"POST",dataType:"json",success:function(e){if(e!=0){for(i in e){var t=e[i];r.find('.error-message[data-validation="'+t+'"]').show()}r.addClass("has-error");r.find(".cloud-error").slideDown("fast");typeof n=="function"&&n(o)}else typeof n=="function"&&n(!0)}})}else if(typeof n=="function"){n(!0);return!0}}var l=n.find(".field");setTimeout(function(){l.each(function(){var t=e(this).find(".input textarea, .input input, .input select"),r=t.is('[type="checkbox"], [type="radio"]'),i=t.is('[type="checkbox"], [type="radio"]')?"change":"blur";t.not(".special-field").on(i,function(){n.find(".submit input:focus").size()===0&&f(t)})})},100);var c=[];n.submit(function(t){function a(e){c.push(e);c.length==u.length&&l()}function l(){var t=!0;for(i in c)c[i]!==!0&&(t=!1);if(t){n.addClass("validated");n.submit();return!0}var r=n.find(".section");r.size()>0?r.each(function(){if(e(this).find(".has-error")){e(this).addClass("has-error");n.addClass("has-error")}}):n.find(".has-error").size()&&n.addClass("has-error");e.scrollTo(n.find(".has-error"),300)}n.removeClass("has-error");n.find(".has-error").removeClass("has-error");n.find(".cloud-error").hide();n.find(".error-message").hide();if(n.hasClass("validated")){var r=n.find('input[type="submit"]').data("on_success");if(r){function_parts=r.split(".");if(typeof window[function_parts[0]]=="undefined")throw"Error.  Function "+r+" does not exist.";var s=window[function_parts[0]];typeof s=="function"?s(n):s.hasOwnProperty(function_parts[1])&&s[function_parts[1]](n);t.preventDefault();return!1}return!0}c=[];t.stopPropagation();t.preventDefault();var o=n.find(".field"),u=[];o.each(function(){var t=e(this).find(".input textarea, .input input, .input select");t.size()>0&&u.push(t)});for(i=0;i<u.length;i++)f(u[i],a)})}})});