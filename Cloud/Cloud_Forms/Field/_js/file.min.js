CloudField.on("init",function(e,t){var n=".type-file",r=e(n,t).add(t.filter(n));r.each(function(){if(e(this).find(".clone").size()>0)return;var t=e(this),n=t.find(".uploader"),r=n.data("uploader"),i=t.find(".remove-file"),s=r.isWP?cloud.wp_ajax:cloud.cloud_ajax,o=t.find('input[name="'+r.name+'"]'),u=t.find(".display"),a=t.find(".upload-button");n.fineUploader({debug:!0,button:a,dragAndDrop:{disableDefaultDropzone:!0},mode:"basic",request:{params:{action:"cloud_upload_file",allowedExtensions:r.allowedExtensions,uploadDir:r.uploadDir,wpMedia:r.wpMedia},paramsInBody:!0,endpoint:s,autoUpload:!1},failedUploadTextDisplay:{mode:"custom",maxChars:40,responseProperty:"error",enableTooltip:!0},validation:{itemLimit:1,acceptFiles:r.allowedExtensions.join(", "),allowedExtensions:r.allowedExtensions}}).on("error",function(e,t,n,r){}).on("complete",function(e,t,n,i){if(i.success){a.hide();u.find(".name").html(n);u.find(".upload-name").html(i.uploadName);o.val(r.uploadDir+"/"+i.uploadName);u.show()}else console.log(n,i)});i.on("click",function(){a.show();u.hide();u.find(".name").html("");var t=u.find(".upload-name").html();u.find(".upload-name").html("");o.val("");e.ajax({type:"post",dataType:"json",url:s,data:{action:"cloud_delete_upload",fileName:t,uploadDir:r.uploadDir},success:function(e){console.log(e)}})})})});